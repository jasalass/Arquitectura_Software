---
execution:
- concurrency: 100
  hold-for: 2m
  ramp-up: 30s
  scenario: flujo-completo-toma-ramos
- concurrency: 300
  hold-for: 3m
  ramp-up: 45s
  scenario: flujo-completo-toma-ramos
- concurrency: 500
  hold-for: 3m
  ramp-up: 1m
  scenario: flujo-completo-toma-ramos
- concurrency: 1000
  hold-for: 3m
  ramp-up: 90s
  scenario: flujo-completo-toma-ramos
- concurrency: 3000
  hold-for: 3m
  ramp-up: 2m
  scenario: flujo-completo-toma-ramos
- concurrency: 5000
  hold-for: 3m
  ramp-up: 3m
  scenario: flujo-completo-toma-ramos
- concurrency: 10000
  hold-for: 3m
  ramp-up: 4m
  scenario: flujo-completo-toma-ramos
scenarios:
  flujo-completo-toma-ramos:
    requests:
    - body: |
        {
          "email": "user@email.com",
          "password": "12345"
        }
      extract-jsonpath:
        token:
          jsonpath: $.token
        user_uuid:
          jsonpath: $.user.uuid
      headers:
        Content-Type: application/json
      label: login-email
      method: POST
      url: ${BASE_URL}/auth
    - extract-jsonpath:
        seccion_id:
          default: 4
          jsonpath: $[0].secciones[0].id
      headers:
        Authorization: Bearer ${token}
      label: ver-asignaturas
      method: GET
      url: ${BASE_URL}/inscripcion/asignaturas
    - body: |
        {
          "alumnoRef": "${user_uuid}",
          "seccionId": ${seccion_id}
        }
      headers:
        Authorization: Bearer ${token}
        Content-Type: application/json
      label: tomar-ramo
      method: POST
      url: ${BASE_URL}/inscripcion/inscripciones
    - headers:
        Authorization: Bearer ${token}
      label: ver-inscripciones-alumno
      method: GET
      url: ${BASE_URL}/inscripcion/alumnos/${user_uuid}/asignaturas
    - headers:
        Authorization: Bearer ${token}
      label: estado-alumno-inscripcion
      method: GET
      url: ${BASE_URL}/inscripcion/alumno-estado/${user_uuid}
    - headers:
        Authorization: Bearer ${token}
      label: estado-pago
      method: GET
      url: ${BASE_URL}/pago/estado/${user_uuid}
    - body: |
        {
          "uuid": "${user_uuid}"
        }
      headers:
        Authorization: Bearer ${token}
        Content-Type: application/json
      label: pagar-matricula
      method: POST
      url: ${BASE_URL}/pago/pagar-matricula
    think-time: 0.3s
settings:
  env:
    BASE_URL: http://api.utf.local
  http:
    timeout: 30s

